<FULL CODE BLOCK FROM CANVAS>